<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" type="text/css" href="learn-vi.css" />
	<title>VIM学习笔记 命令历史纪录 (History)</title>
</head>
<body>
	<h1>VIM学习笔记 命令历史纪录 (History)</h1>
	<table summary="Commands" border="2" frame="hsides" rules="all" cellspacing="0" cellpadding="3">
		<tr><td><kbd></kbd></td><td rowspan="2"></td></tr>
		<tr><td><kbd></kbd></td></tr>
		<tr><td><kbd></kbd></td><td></td></tr>
	</table>
	<p><a href="https://yyq123.github.io/learn-vim/images/" title=""><img src="https://yyq123.github.io/learn-vim/images/.png" alt="" width="500" height="" /></a></p>
	<p>Vim会将命令历史纪录，保存在<a href="http://yyq123.github.io/learn-vim/learn-vi-59-01-viminfo.html" title="vimifo">viminfo</a>文件中；我们可以通过viminfo和history选项，来控制存储历史纪录的类型和数量；在<a href="http://yyq123.github.io/learn-vim/learn-vi-46-CommandlineMode.html" title="命令行模式(Command-line Mode)">命令行模式</a>和<a href="http://yyq123.blogspot.com/2009/03/vim.html" title="">搜索文本</a>时，则可以重新调用这些历史纪录。</p>

	<p><code class="inset"></code></p>
	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">命令历史类型</p>
	<p>命令历史可以分为以下几种类型：</p>
	<table summary="Commands" border="1" frame="border" rules="all" cellspacing="0" cellpadding="3">
		<tr><th style="white-space: nowrap">类型</th><th>标识</th><th>内容</th></tr>
		<tr><td><code class="inset">c[md]</code></td><td><code class="inset">:</code></td><td>命令行历史</td></tr>
		<tr><td><code class="inset">s[earch]</code></td><td><code class="inset">/ or ?</code></td><td>查找字符串历史</td></tr>
		<tr><td><code class="inset">e[xpr]</code></td><td><code class="inset">=</code></td><td>表达式<a href="http://yyq123.github.io/learn-vim/learn-vi-12-Register.html" title="Register">寄存器</a>（"=）历史</td></tr>
		<tr><td><code class="inset">i[nput]</code></td><td><code class="inset">@</code></td><td>由input()函数输入的历史</td></tr>
		<tr><td><code class="inset">d[ebug]</code></td><td><code class="inset">&gt;</code></td><td>调试命令历史</td></tr>
		<tr><td><code class="inset">a[ll]</code></td><td><code class="inset"></code></td><td>所有类型的历史纪录</td></tr>
	</table>


	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">查看命令历史</p>
	<p>使用以下命令，可以显示命令行历史纪录：</p>
	<p style="text-indent:2em"><code class="inset">:history</code></p>
	<p><a href="https://yyq123.github.io/learn-vim/images/history.png" title="history"><img src="https://yyq123.github.io/learn-vim/images/history.png" alt="history" /></a></p>
	<p>而使用以下命令，则可以显示所有类型的历史纪录：</p>
	<p style="text-indent:2em"><code class="inset">:history all</code></p>
	<p><a href="https://yyq123.github.io/learn-vim/images/history_all.png" title="history all"><img src="https://yyq123.github.io/learn-vim/images/history_all.png" alt="history all" /></a></p>
	<p>使用以下格式的:history命令，可以查看指定类型和指定数目的历史纪录：</p>
	<p style="text-indent:2em"><code class="inset">:his[tory] [{name}] [{first}][, [{last}]]</code></p>
	<ul>
		<li><code class="inset">{name}</code>，历史纪录类型；</li>
		<li><code class="inset">{first}</code>，命令历史的起始位置（默认为第一条纪录）；</li>
		<li><code class="inset">{last}</code>，命令历史的终止位置（默认为最后一条纪录）。</li>
	</ul>
	<p>使用以下命令，可以列出第一到第五条命令行历史：</p>
	<p style="text-indent:2em"><code class="inset">:history c 1,5</code></p>
	<p>如果在命令中没有指定{first}和{last}，那么将会列出所有命令历史。</p>
	<p>在命令中使用正数，将列出指定位置的命令历史。例如以下命令，将列出第五条命令行历史：</p>
	<p style="text-indent:2em"><code class="inset">:history c 5</code></p>
	<p>命令行中的负数，则是相对于最后一条历史纪录的向前位移。例如以下命令，将列出了上五次的查找历史：</p>
	<p style="text-indent:2em"><code class="inset">:history s -5</code></p>
:history-indexing
	<p style="text-indent:2em"><code class="inset">:help :history</code></p>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">删除历史纪录</p>
	<p>使用以下命令，可以删除命令行历史纪录：</p>
	<p><code class="inset">:call histdel("")</code></p>
	<p>我们可以删除指定类型的历史纪录。例如使用以下命令，将删除所有查询历史纪录：</p>
	<p><code class="inset">:call histdel("seach")</code></p>
	<p>您也可以直接编辑<a href="http://yyq123.github.io/learn-vim/learn-vi-59-01-viminfo.html" title="vimifo">viminfo</a>文件，直接删除其中的历史纪录。请注意，需要重启Vim，以重新读取修改后的viminfo文件。</p>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">命令历史选项</p>
	<p></p>
	<p>通过history选项，可以控制记录历史命令的数量（默认为50）。例如以下命令，设置保存1000条命令历史纪录：</p>
	<p><code class="inset">:set history=1000</code></p>
	<p>请注意：在<a href="http://yyq123.github.io/learn-vim/learn-vi-59-01-viminfo.html" title="vimifo">viminfo</a>选项中，也有命令历史相关参数；请在<a href="http://yyq123.github.io/learn-vim/learn-vi-59-vimrc.html" title="vimrc">vimrc</a>配置文件中，检查'viminfo'和'history'设置的的一致性和优先级。</p>

重复执行上一条命令
	<p><code class="inset">@:</code></p>

	
	<table summary="Commands" border="2" frame="hsides" rules="all" cellspacing="0" cellpadding="3">
		<caption>命令小结</caption>
		<tr><td><code class="inset">:</code></td><td rowspan="2"></td></tr>
		<tr><td><code class="inset">:</code></td></tr>
		<tr><td><code class="inset">:</code></td><td></td></tr>
		<tr><td><code class="inset">:</code></td><td></td></tr>
		<tr><td><code class="inset">:</code></td><td></td></tr>
	</table>

</body>
</html>

