<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" type="text/css" href="learn-vi.css" />
	<title>VIM学习笔记 键盘映射 (Map)</title>
</head>
<body>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">设置键盘映射</p>
	<p>使用:map命令，可以将键盘上的某个按键与Vim的命令绑定起来。例如使用以下命令，可以通过F5键将单词用花括号括起来：</p>
	<p style="text-indent:2em"><code class="inset">:map &lt;F5&gt; i{ea}&lt;Esc&gt;</code></p>
	<p>其中：i{将插入字符{，然后使用Esc退回到命令状态；接着用e移到单词结尾，a}增加字符}，最后退至命令状态。在执行以上命令之后，光标定位在一个单词上（例如amount），按下F5键，这时字符就会变成{amount}的形式。</p>
	
	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">不同模式下的键盘映射</p>
	<p>使用下表中不同形式的map命令，可以针对特定的模式设置键盘映射：</p>
	<table summary="Map in diffent mode" border="1" rules="all" cellspacing="0" cellpadding="2" style="text-align:center">
		<tr><td>Command<br />命令</td><td>Normal<br />&nbsp;&nbsp;常规模式&nbsp;&nbsp;</td><td>Visual<br />可视化模式</td><td>Operator Pending<br />运算符模式</td><td>Insert Only<br />插入模式</td><td>Command Line<br />命令行模式</td></tr>
		<tr><td><code class="inset">:map</code></td><td>y</td><td>y</td><td>y</td><td></td><td></td></tr>
		<tr><td><code class="inset">:nmap</code></td><td>y</td><td></td><td></td><td></td><td></td></tr>
		<tr><td><code class="inset">:vmap</code></td><td></td><td>y</td><td></td><td></td><td></td></tr>
		<tr><td><code class="inset">:omap</code></td><td></td><td></td><td>y</td><td></td><td></td></tr>
		<tr><td><code class="inset">:map!</code></td><td></td><td></td><td></td><td>y</td><td>y</td></tr>
		<tr><td><code class="inset">:imap</code></td><td></td><td></td><td></td><td>y</td><td></td></tr>
		<tr><td><code class="inset">:cmap</code></td><td></td><td></td><td></td><td></td><td>y</td></tr>
	</table>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">键盘映射实例</p>
	<p>使用以下命令，可以在Normal Mode和Visual/Select Mode下，利用Tab键和Shift-Tab键来缩进文本：</p>
	<p><code class="inset">
	nmap &lt;tab&gt; V&gt;<br />
	nmap &lt;s-tab&gt; V&lt;<br />
	vmap &lt;tab&gt; &gt;gv<br />
	vmap &lt;s-tab&gt; &lt;gv
	</code></p>
	<p>使用以下命令，指定F10键来新建标签页：</p>
	<p><code class="inset">:map &lt;F10&gt; &lt;Esc&gt;:tabnew&lt;CR&gt;</code></p>
	<p>其中：&lt;Esc&gt;代表<kbd>Escape</kbd>键；&lt;CR&gt;代表<kbd>Enter</kbd>键；而功能键则用&lt;F10&gt;表示。首先进入命令行模式，然后执行新建标签页的:tabnew命令，最后返回常规模式。</p>
	<p>同理：对于组合键，可以用&lt;C-Esc&gt;代表<kbd>Ctrl-Esc</kbd>；使用&lt;S-F1&gt;表示<kbd>Shift-F1</kbd>。对于Mac用户，可以使用&lt;D&gt;代表<kbd>Command</kbd>键。</p>
	<p>注意：<kbd>Alt</kbd>键可以使用&lt;M-key&gt;或&lt;A-key&gt;来表示。</p>
	<p>关于键盘符号的详细说明，请使用<code class="inset">:h key-notation</code>命令查看帮助信息。</p>
	<p>我们还可以针对函数设置键盘映射。 例如，将以下代码加入.vimrc文件，就可以利用快捷键，来打开或关闭针对搜索结果的高亮显示。</p>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">查看键盘映射</p>
	<p><a href="http://www.flickr.com/photos/yyq123/5236968127/" title="map by yyq123, on Flickr"><img src="http://farm6.static.flickr.com/5081/5236968127_0b9a53f183.jpg" width="457" height="152" alt="map" /></a></p>
	<p>使用<code class="inset">:map</code>命令，可以列出所有键盘映射。其中第一列标明了映射在哪种模式下工作：</p>
	<table summary="Map in diffent mode" border="1" rules="all" cellspacing="0" cellpadding="2" style="text-align:center">
		<tr><td>标记</td><td>模式</td></tr>
		<tr><td>&lt;space&gt;</td><td>常规模式，可视化模式，运算符模式</td></tr>
		<tr><td>n</td><td>常规模式</td></tr>
		<tr><td>v</td><td>可视化模式</td></tr>
		<tr><td>o</td><td>运算符模式</td></tr>
		<tr><td>!</td><td>插入模式，命令行模式</td></tr>
		<tr><td>i</td><td>插入模式</td></tr>
		<tr><td>c</td><td>命令模式</td></tr>
	</table>
	<p>使用<code class="inset">:map!</code>命令，则只列出插入和命令行模式的映射。而<code class="inset">:imap</code>，<code class="inset">:vmap</code>，<code class="inset">:omap</code>，<code class="inset">:nmap</code>命令则只是列出相应模式下的映射。</p>

	<p style="font-weight:bold; border-bottom:1px solid lightgray; border-left:6px solid lightgray; padding:0 0 3px 5px">取消键盘映射</p>
	<p>如果想要取消一个映射，可以使用以下命令：</p>
	<p style="text-indent:2em"><code class="inset">:unmap &lt;F10&gt;</code></p>
	<p>注意：必须为:unmap命令指定一个参数。如果未指定任何参数，那么系统将会报错，而不会取消所有的键盘映射。</p>
	<p>针对不同模式下的键盘映射，需要使用与其相对应的unmap命令。例如：使用<code class="inset">:iunmap</code>命令，取消插入模式下的键盘映射；而取消常规模式下的键盘映射，则需要使用<code class="inset">:nunmap</code>命令。</p>
	<p>如果想要取消所有映射，可以使用<code class="inset">:mapclear</code>命令。请注意，这个命令将会移除所有用户定义和系统默认的键盘映射。</p>
	<p>Technorati Tags: <a href="http://www.technorati.com/tags/vi" rel="tag">vi</a>,<a href="http://www.technorati.com/tags/vim" rel="tag">vim</a>,<a href="http://www.technorati.com/tags/gvim" rel="tag">gvim</a></p>
	
</body>
</html>
